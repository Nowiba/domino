<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Domino Game</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: #1a2b3c;
            color: #fff;
            overflow-x: hidden;
        }

        #app {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 20px;
            background: #2c3e50;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .game-container {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 20px;
        }

        .board {
            background: #34495e;
            border-radius: 10px;
            padding: 20px;
            min-height: 400px;
            position: relative;
            overflow: auto;
        }

        .domino-track {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            min-height: 300px;
            position: relative;
        }

        .domino {
            width: 80px;
            height: 160px;
            background: #fff;
            border-radius: 8px;
            margin: 10px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s;
            cursor: pointer;
            position: absolute;
        }

        .domino.horizontal {
            width: 160px;
            height: 80px;
            flex-direction: row;
        }

        .domino.double {
            background: #fff8e1;
        }

        .domino .pips {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .pip {
            width: 12px;
            height: 12px;
            background: #2c3e50;
            border-radius: 50%;
            margin: 2px;
        }

        .divider {
            width: 100%;
            height: 2px;
            background: #bdc3c7;
            margin: 5px 0;
        }

        .domino.horizontal .divider {
            width: 2px;
            height: 100%;
            margin: 0 5px;
        }

        .player-hand {
            background: #2c3e50;
            border-radius: 10px;
            padding: 20px;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            padding: 12px;
            border: none;
            border-radius: 5px;
            background: #3498db;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:disabled {
            background: #7f8c8d;
            cursor: not-allowed;
        }

        .end-marker {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #e74c3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .boneyard {
            background: #2c3e50;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .scoreboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .player-info {
            background: #34495e;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="header">
            <h1>Professional Domino Game</h1>
            <p>Playing: Block Dominoes</p>
        </div>

        <div class="scoreboard" id="scoreboard"></div>

        <div class="game-container">
            <div class="board">
                <div class="domino-track" id="dominoTrack"></div>
            </div>

            <div class="player-hand" id="playerArea">
                <h2>Your Hand</h2>
                <div id="handContainer"></div>
                <div class="controls">
                    <button id="drawButton">Draw from Boneyard</button>
                    <button id="passButton" disabled>Pass Turn</button>
                </div>
            </div>
        </div>

        <div class="boneyard">
            <h3>Boneyard: <span id="boneyardCount">0</span> remaining</h3>
        </div>
    </div>

    <script>
        class DominoGame {
            constructor() {
                this.players = [];
                this.currentPlayer = 0;
                this.board = [];
                this.boneyard = [];
                this.openEnds = [];
                this.gameMode = 'block';
                this.dominoSet = this.generateDominoSet();
                
                this.initGame();
                this.initEventListeners();
            }

            initGame() {
                this.shuffleDominoes();
                this.setupPlayers(2);
                this.dealDominoes();
                this.determineFirstPlayer();
                this.updateUI();
            }

            generateDominoSet() {
                const dominoes = [];
                for (let i = 0; i <= 6; i++) {
                    for (let j = i; j <= 6; j++) {
                        dominoes.push([i, j]);
                    }
                }
                return dominoes;
            }

            shuffleDominoes() {
                for (let i = this.dominoSet.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [this.dominoSet[i], this.dominoSet[j]] = [this.dominoSet[j], this.dominoSet[i]];
                }
            }

            setupPlayers(count) {
                for (let i = 0; i < count; i++) {
                    this.players.push({
                        id: i,
                        name: i === 0 ? 'Player' : `Computer ${i}`,
                        hand: [],
                        score: 0,
                        isHuman: i === 0
                    });
                }
            }

            dealDominoes() {
                const dominoesPerPlayer = this.players.length === 2 ? 7 : 5;
                this.players.forEach(player => {
                    player.hand = this.dominoSet.splice(0, dominoesPerPlayer);
                });
                this.boneyard = [...this.dominoSet];
            }

            determineFirstPlayer() {
                let maxDouble = -1;
                this.players.forEach((player, index) => {
                    player.hand.forEach(domino => {
                        if (domino[0] === domino[1] && domino[0] > maxDouble) {
                            maxDouble = domino[0];
                            this.currentPlayer = index;
                        }
                    });
                });
            }

            initEventListeners() {
                document.getElementById('drawButton').addEventListener('click', () => this.drawDomino());
                document.getElementById('passButton').addEventListener('click', () => this.passTurn());
            }

            updateUI() {
                this.updateScoreboard();
                this.updateHand();
                this.updateBoard();
                this.updateBoneyard();
                this.updateControls();
            }

            updateScoreboard() {
                const container = document.getElementById('scoreboard');
                container.innerHTML = this.players.map(player => `
                    <div class="player-info">
                        <h3>${player.name}</h3>
                        <p>Score: ${player.score}</p>
                        <p>Dominos: ${player.hand.length}</p>
                    </div>
                `).join('');
            }

            updateHand() {
                const container = document.getElementById('handContainer');
                container.innerHTML = this.humanPlayer.hand
                    .map((domino, index) => this.createDominoElement(domino, index))
                    .join('');
            }

            createDominoElement(domino, index) {
                const isDouble = domino[0] === domino[1];
                return `
                    <div class="domino ${isDouble ? 'double' : ''}" data-index="${index}">
                        <div class="pips">${this.createPips(domino[0])}</div>
                        <div class="divider"></div>
                        <div class="pips">${this.createPips(domino[1])}</div>
                    </div>
                `;
            }

            createPips(value) {
                if (value === 0) return '';
                const positions = {
                    1: ['center'],
                    2: ['top-left', 'bottom-right'],
                    3: ['top-left', 'center', 'bottom-right'],
                    4: ['top-left', 'top-right', 'bottom-left', 'bottom-right'],
                    5: ['top-left', 'top-right', 'center', 'bottom-left', 'bottom-right'],
                    6: ['top-left', 'top-right', 'middle-left', 'middle-right', 'bottom-left', 'bottom-right']
                };
                return positions[value].map(pos => `<div class="pip ${pos}"></div>`).join('');
            }

            updateBoard() {
                const container = document.getElementById('dominoTrack');
                container.innerHTML = '';
                this.board.forEach(domino => {
                    const element = document.createElement('div');
                    element.className = `domino ${domino.orientation} ${domino.isDouble ? 'double' : ''}`;
                    element.style.left = `${domino.x}px`;
                    element.style.top = `${domino.y}px`;
                    element.innerHTML = `
                        <div class="pips">${this.createPips(domino.values[0])}</div>
                        <div class="divider"></div>
                        <div class="pips">${this.createPips(domino.values[1])}</div>
                    `;
                    container.appendChild(element);
                });

                // Add end markers
                this.openEnds.forEach((end, index) => {
                    const marker = document.createElement('div');
                    marker.className = 'end-marker';
                    marker.style.left = `${end.x}px`;
                    marker.style.top = `${end.y}px`;
                    marker.textContent = end.value;
                    marker.addEventListener('click', () => this.handleEndClick(index));
                    container.appendChild(marker);
                });
            }

            handleEndClick(endIndex) {
                const selectedDomino = document.querySelector('.domino.selected');
                if (selectedDomino) {
                    const dominoIndex = parseInt(selectedDomino.dataset.index);
                    this.playDomino(dominoIndex, endIndex);
                }
            }

            playDomino(handIndex, endIndex) {
                const domino = this.humanPlayer.hand[handIndex];
                const end = this.openEnds[endIndex];
                
                if (!this.isValidPlay(domino, end.value)) return;

                const rotated = domino[0] === end.value ? domino : [domino[1], domino[0]];
                this.placeDomino(rotated, endIndex);
                this.humanPlayer.hand.splice(handIndex, 1);
                
                if (this.humanPlayer.hand.length === 0) {
                    this.endGame();
                    return;
                }

                this.nextTurn();
            }

            isValidPlay(domino, endValue) {
                return domino[0] === endValue || domino[1] === endValue;
            }

            placeDomino(domino, endIndex) {
                const isDouble = domino[0] === domino[1];
                const end = this.openEnds[endIndex];
                const position = this.calculatePosition(end, isDouble);
                
                this.board.push({
                    values: domino,
                    orientation: isDouble ? 'vertical' : 'horizontal',
                    x: position.x,
                    y: position.y,
                    isDouble
                });

                this.updateOpenEnds(domino, position, isDouble);
            }

            calculatePosition(end, isDouble) {
                // Complex position calculation based on board state
                // Simplified example:
                return {
                    x: end.x + (isDouble ? 0 : 80),
                    y: end.y + (isDouble ? 80 : 0)
                };
            }

            updateOpenEnds(domino, position, isDouble) {
                this.openEnds.splice(endIndex, 1);
                if (isDouble) {
                    this.openEnds.push(
                        { value: domino[0], x: position.x, y: position.y - 40 },
                        { value: domino[1], x: position.x, y: position.y + 40 }
                    );
                } else {
                    this.openEnds.push({
                        value: domino[1],
                        x: position.x + 80,
                        y: position.y
                    });
                }
            }

            drawDomino() {
                if (this.boneyard.length === 0) return;
                this.humanPlayer.hand.push(this.boneyard.pop());
                this.updateUI();
            }

            passTurn() {
                this.nextTurn();
            }

            nextTurn() {
                this.currentPlayer = (this.currentPlayer + 1) % this.players.length;
                if (!this.currentPlayer.isHuman) {
                    setTimeout(() => this.computerTurn(), 1000);
                }
                this.updateUI();
            }

            computerTurn() {
                // Advanced AI logic
                const validMoves = this.findValidMoves();
                if (validMoves.length > 0) {
                    const move = this.selectBestMove(validMoves);
                    this.playComputerMove(move);
                } else if (this.boneyard.length > 0) {
                    this.computerDraw();
                } else {
                    this.passTurn();
                }
            }

            findValidMoves() {
                return this.openEnds.flatMap((end, endIndex) => 
                    this.currentPlayer.hand
                        .filter(domino => this.isValidPlay(domino, end.value))
                        .map(domino => ({ domino, endIndex }))
                );
            }

            selectBestMove(moves) {
                // Prioritize playing doubles and high-value dominoes
                return moves.reduce((best, current) => {
                    const currentScore = current.domino[0] + current.domino[1];
                    const bestScore = best.domino[0] + best.domino[1];
                    return currentScore > bestScore ? current : best;
                });
            }

            endGame() {
                // Calculate scores and handle game end
                alert('Game Over!');
            }

            get humanPlayer() {
                return this.players.find(p => p.isHuman);
            }

            updateControls() {
                document.getElementById('passButton').disabled = !this.canPass();
                document.getElementById('drawButton').disabled = this.boneyard.length === 0;
            }

            canPass() {
                return this.boneyard.length === 0 && 
                       !this.humanPlayer.hand.some(d => 
                           this.openEnds.some(e => this.isValidPlay(d, e.value)));
            }

            updateBoneyard() {
                document.getElementById('boneyardCount').textContent = this.boneyard.length;
            }
        }

        // Start the game when loaded
        window.addEventListener('load', () => new DominoGame());
    </script>
</body>
</html>
