<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domino Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        #game-container {
            text-align: center;
        }

        #language-selector {
            margin-bottom: 20px;
        }

        #board {
            border: 2px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
        }

        #player-hand {
            border: 2px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
        }

        #controls button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>
</head>
<body>
    <div id="game-container">
        <div id="language-selector">
            <label for="language">Select Language:</label>
            <select id="language">
                <option value="en">English</option>
                <option value="fr">Français</option>
                <option value="es">Español</option>
                <!-- Add more languages as needed -->
            </select>
        </div>
        <div id="board"></div>
        <div id="player-hand"></div>
        <div id="controls">
            <button id="create-game">Create Game</button>
            <button id="join-game">Join Game</button>
        </div>
    </div>

    <script>
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyCMxiBRciVQ9oKeiw3X9hxv_4BhDKABtgQ",
          authDomain: "web-site-ftw.firebaseapp.com",
          databaseURL: "https://web-site-ftw-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "web-site-ftw",
          storageBucket: "web-site-ftw.firebasestorage.app",
          messagingSenderId: "275070822133",
          appId: "1:275070822133:web:f1fdc6c20b5af4690fc7bc",
          measurementId: "G-PZ7JBGQWQE"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // DOM Elements
        const board = document.getElementById('board');
        const playerHand = document.getElementById('player-hand');
        const createGameButton = document.getElementById('create-game');
        const joinGameButton = document.getElementById('join-game');
        const languageSelector = document.getElementById('language');

        // Game State
        let gameId = null;
        let playerId = null;

        // Create a new game
        createGameButton.addEventListener('click', () => {
            gameId = `game_${Math.random().toString(36).substr(2, 9)}`;
            playerId = `player_${Math.random().toString(36).substr(2, 9)}`;
            set(ref(database, `games/${gameId}`), {
                players: { [playerId]: true },
                board: [],
                hands: { [playerId]: [] }
            });
            alert(translate('gameCreated') + ` ID: ${gameId}`);
        });

        // Join an existing game
        joinGameButton.addEventListener('click', () => {
            const gameIdToJoin = prompt(translate('enterGameId'));
            if (gameIdToJoin) {
                gameId = gameIdToJoin;
                playerId = `player_${Math.random().toString(36).substr(2, 9)}`;
                const gameRef = ref(database, `games/${gameId}/players/${playerId}`);
                set(gameRef, true);
                alert(translate('joinedGame') + ` ID: ${gameId}`);
            }
        });

        // Listen for game state changes
        function listenForGameUpdates() {
            if (gameId) {
                const gameRef = ref(database, `games/${gameId}`);
                onValue(gameRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        updateBoard(data.board);
                        updatePlayerHand(data.hands[playerId]);
                    }
                });
            }
        }

        // Update the board display
        function updateBoard(boardState) {
            board.innerHTML = `${translate('board')}: ${boardState.join(', ')}`;
        }

        // Update the player's hand display
        function updatePlayerHand(hand) {
            playerHand.innerHTML = `${translate('yourHand')}: ${hand.join(', ')}`;
        }

        // Start listening for updates
        listenForGameUpdates();

        // Handle language change
        languageSelector.addEventListener('change', () => {
            updateLanguage(languageSelector.value);
            updateBoard([]);
            updatePlayerHand([]);
        });

        // Initialize language
        updateLanguage(languageSelector.value);

        // Translations
        const translations = {
            en: {
                gameCreated: "Game Created!",
                enterGameId: "Enter Game ID to join:",
                joinedGame: "Joined Game!",
                board: "Board",
                yourHand: "Your Hand"
            },
            fr: {
                gameCreated: "Partie créée !",
                enterGameId: "Entrez l'ID de la partie à rejoindre :",
                joinedGame: "Partie rejointe !",
                board: "Plateau",
                yourHand: "Votre Main"
            },
            es: {
                gameCreated: "¡Juego creado!",
                enterGameId: "Ingrese el ID del juego para unirse:",
                joinedGame: "¡Juego unido!",
                board: "Tablero",
                yourHand: "Tu Mano"
            }
            // Add more languages as needed
        };

        let currentLanguage = 'en';

        function translate(key) {
            return translations[currentLanguage][key] || translations['en'][key];
        }

        function updateLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
        }
    </script>
</body>
</html>
